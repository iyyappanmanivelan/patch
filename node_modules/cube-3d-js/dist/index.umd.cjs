(function(u,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(u=typeof globalThis<"u"?globalThis:u||self,f(u.index={}))})(this,function(u){"use strict";const f="cube-3d",g="cube-3d-base";class D extends Error{constructor(t){super(t),this.name="Cube3DError"}}const p=e=>{const t=document.getElementById(e);if(!t)throw new Error(`Element with ID ${e} not found.`);return t.style.overflow="hidden",t.style.userSelect="none",t},v=(e,t,o)=>{const n=document.createElement("div");return n.setAttribute("id",o),n.style.transformStyle="preserve-3d",n.style.width=`${e}px`,n.style.height=`${t}px`,n},I=(e,t)=>{const o=e.querySelectorAll("[data-cube-face]");if(o.forEach(n=>{n.style.position="absolute",n.style.width="100%",n.style.height="100%"}),o.length===0)throw new D("At least one face element is required for transformations.");{const n=[`translateZ(${t/2}px)`,`translateX(${t/2}px) rotateY(90deg)`,`translateZ(-${t/2}px) rotateY(180deg)`,`translateX(-${t/2}px) rotateY(-90deg)`];o.forEach((s,r)=>{s&&(s.style.transform=n[r])})}return o},L=(e,t)=>{let o;new MutationObserver(s=>{s.forEach(r=>{if(r.attributeName==="style"){const i=window.getComputedStyle(e).getPropertyValue("transform"),c=b(i),a=y(c);if(a!==o){const d=o;o=a,t(a,d)}}})}).observe(e,{attributes:!0})};function b(e){const t=e.match(/\((.*?)\)/);if(!t)return 0;const o=t[1].split(", ").map(Number),n=o[8],s=o[0];return Math.atan2(n,s)*180/Math.PI}function y(e){switch(!0){case(e>=-45&&e<45):return 1;case(e>=45&&e<135):return 4;case(e>=-135&&e<-45):return 2;default:return 3}}const S=(e,t,o)=>{let n=!1,s,r,i,c=t;h(e,c),e.addEventListener("mousedown",E=>{n=!0,s=E.clientX,i=window.innerWidth,document.addEventListener("mousemove",a),document.addEventListener("mouseup",d)});function a(E){if(n){r=E.clientX;const T=Math.abs(r-s)/i*100*o;let m;r<s?m=(c-T%360)%360:m=(c+T%360)%360,c=m,h(e,m)}}function d(){n=!1,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",d)}},w=(e,t,o)=>{let n=t;e.addEventListener("wheel",s=>{let r;s.deltaX>0?r=(n-o)%360:r=(n+o)%360,n=r,h(e,r)})},F=(e,t,o)=>{let n=!1,s,r,i=t;e.addEventListener("touchstart",c=>{n=!0,s=c.touches[0].clientX}),e.addEventListener("touchmove",c=>{let a;if(n){r=c.touches[0].clientX;const d=Math.abs(r-s);if(d<10)return;s<r?a=(i+d/o)%360:a=(i-d/o)%360,i=a,h(e,a)}}),e.addEventListener("touchend",()=>{n=!1})};function _(e,t,o,n,s){S(e,t,o),w(e,t,n),F(e,t,s)}const h=(e,t)=>{e.style.transform=`rotateY(${t}deg)`};let l;const x=(e=f,{width:t=500,height:o=500,baseId:n=g,initialRotation:s=0,intensity:r=.2,scrollIntensity:i=1.5,swipeIntensity:c=75}={})=>{const a=p(e);if(!a){console.error("Element not found.");return}l=v(t,o,n),I(a,t).forEach(E=>{l.appendChild(E)}),a.appendChild(l),_(l,s,r,i,c)},A=e=>{L(l,(t,o)=>{e(t,o)})},N=e=>l.children[e-1];u.getFaceByIndex=N,u.init=x,u.onRotate=A,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
